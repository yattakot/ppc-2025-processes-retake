# Маркировка компонент на бинарном изображении (черные области соответствуют объектам, белые – фону)

- Student: Морозова Софья Андреевна, group 3823Б1ФИ2
- Technology: SEQ | MPI
- Variant: 31

## 1. Introduction

Нужно находить связные области на чёрно-белых картинках. Это полезно для
анализа изображений в медицине или компьютерном зрении. Задача учит работать с
графами и параллельными вычислениями.

## 2. Problem Statement

**Формальная постановка задачи:** Найти все связные компоненты на чёрно-белом
изображении.
**Входные данные:**
Матрица из 0 и 1 (0 - фон, 1 - объект).
**Выходные данные:**
Матрица с метками компонент и их количество.
**Ограничения:**

- изображение должно быть корректным.
- все процессы должны получить одинаковый результат.
- нельзя использовать готовые библиотеки для маркировки.

## 3. Baseline Algorithm (Sequential)

Используем поиск в глубину. Проходим изображение построчно. Видим непомеченную
единичку - запускаем DFS через стек. Все связанные пиксели получают одну метку.
Переходим к следующей компоненте.

## 4. Parallelization Scheme

Для MPI делим изображение по строкам. Каждый процесс работает со своей частью.
Используем простое разделение данных.

Этапы работы:

1. Процесс 0 загружает изображение.
2. Распределяет строки между процессами.
3. Каждый процесс метит свои компоненты.
4. Собираем результаты на процессе 0.
5. Объединяем метки.

Сложность алгоритма зависит от размера изображения и числа компонент.

## 5. Implementation Details

- `ops_seq.hpp / ops_seq.cpp` — последовательная версия с DFS
- `ops_mpi.hpp / ops_mpi.cpp` — MPI-реализация с распределением строк
- `common.hpp` — общие типы данных

## 6. Experimental Setup

- Процессор: AMD Ryzen 5 3600 6-Core Processor (6 ядер, 12 потоков)
- Память: 16 ГБ RAM
- ОС: Windows 10
- Компилятор: g++, режим сборки Release

## 7. Results and Discussion

### 7.1 Correctness

Корректность проверена сравнением результатов SEQ и MPI версий. Все объекты
правильно помечены, фон остаётся нулями.

### 7.2 Performance

| Mode | Count | Time, s | Speedup | Efficiency |
|------|-------|---------|---------|------------|
| seq  | 1     | 0.045   | 1.00    | N/A        |
| mpi  | 2     | 0.028   | 1.61    | 80.5%      |
| mpi  | 4     | 0.016   | 2.81    | 70.3%      |
| mpi  | 6     | 0.013   | 3.46    | 57.7%      |

## 8. Conclusions

Задача выполнена успешно. MPI даёт ускорение, но не идеальное. Код работает на
разных платформах. Можно улучшить балансировку нагрузки.

## 9. References

1. Материалы курса "Параллельное программирование для кластерных систем",
   ННГУ им. Н.И. Лобачевского
